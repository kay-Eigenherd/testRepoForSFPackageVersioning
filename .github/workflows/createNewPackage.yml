name: Manual workflow to create unlocked package from unmanaged package Id

on:
  workflow_dispatch:
    inputs:
      name:
        description: 'Repo Name'
        default: 'NewRepo'
        required: true
      packageId:
        description: 'Id of the unlocked Package'
        default: '04t5I000001iufk'
        required: true

jobs:
  job1:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2
    - name: Create a new repo for the package
      run: hub create '${{ github.event.inputs.name }}' --description 'This is a automatically generated repo' #'testOrganization/${{ github.event.inputs.name }}' for creating a organization repo
      env:
        GITHUB_USER: 'kay-Eigenherd'
        GITHUB_TOKEN: ${{ secrets.KEJ_TOKEN }}
    - name: create file to push to new repo
      run: |
        mkdir folderToPushToDifferentRepo
        cd folderToPushToDifferentRepo
        echo "# Test" > README.md
    - name: commit and push to new repo
      run: | #also change to organization
        git config --global credential.helper store
        ps: Set-Content -Path "$HOME\.git-credentials" -Value "https://${{ secrets.KEJ_TOKEN }}:x-oauth-basic@github.com`n" -NoNewline
        git config --global user.email "kay.jenss@eigenherd.com"
        git config --global user.name "kay-Eigenherd"
        git init
        git add .
        git commit -m "generated"
        git remote add origin https://github.com/kay-Eigenherd/${{ github.event.inputs.name }}.git 
        git push
